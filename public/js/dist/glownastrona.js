import{booksCard as i}from"./booksCard.js";let c=0;const a=document.querySelectorAll(".event-item"),l=document.querySelectorAll(".category-list li.visible");function d(){a[c].classList.remove("active"),c=(c+1)%a.length,a[c].classList.add("active"),l.forEach((o,t)=>{o.style.opacity=0,setTimeout(()=>{o.style.opacity=1},t*500)})}a[c].classList.add("active"),d(),setInterval(d,5e3);const h=document.getElementsByClassName("wishlist-icon");Array.from(h).forEach(o=>{o.addEventListener("click",function(t){const e=t.target.dataset.bookId,r=t.target;console.log(e,r),m(e,r)})});function m(o,t){t.classList.toggle("filled"),fetch("/wishlist/add-to-wishlist",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({bookId:o})}).then(e=>{if(!e.ok)throw new Error("\u041E\u0448\u0438\u0431\u043A\u0430 \u0441\u0435\u0442\u0438: "+e.statusText);alert("\u041A\u043D\u0438\u0433\u0430 \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u0430 \u0432 \u0441\u043F\u0438\u0441\u043E\u043A \u0436\u0435\u043B\u0430\u0435\u043C\u043E\u0433\u043E!")}).catch(e=>{console.error("\u041E\u0448\u0438\u0431\u043A\u0430:",e),alert("\u042D\u0442\u0430 \u043A\u043D\u0438\u0433\u0430 \u0443\u0436\u0435 \u0435\u0441\u0442\u044C \u0432 \u0432\u0430\u0448\u0435\u043C \u0441\u043F\u0438\u0441\u043A\u0435 \u0436\u0435\u043B\u0430\u0435\u043C\u043E\u0433\u043E!")})}document.getElementById("category-filter").addEventListener("click",function(o){if(o.target.tagName==="LI"){const t=o.target.textContent;u(t)}});function u(o){fetch(`/postBooksByCategory?category=${encodeURIComponent(o)}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({category:o})}).then(t=>{if(!t.ok)throw new Error("\u041E\u0448\u0438\u0431\u043A\u0430 \u0441\u0435\u0442\u0438: "+t.statusText);return t.json()}).then(t=>{const e=document.querySelector(".col-md-9 .row");e.innerHTML="",t.forEach(r=>{const n=document.createElement("div");n.classList.add("col-md-4","mb-4"),n.innerHTML=i(r),e.appendChild(n)})}).catch(t=>{console.error("\u041E\u0448\u0438\u0431\u043A\u0430:",t),alert("\u041F\u0440\u043E\u0438\u0437\u043E\u0448\u043B\u0430 \u043E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0444\u0438\u043B\u044C\u0442\u0440\u0430\u0446\u0438\u0438 \u043A\u043D\u0438\u0433!")})}document.getElementById("search").addEventListener("input",function(){const t=document.getElementById("search").value;fetch("/search",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({search:t})}).then(e=>{if(!e.ok)throw new Error("\u041E\u0448\u0438\u0431\u043A\u0430 \u0441\u0435\u0442\u0438: "+e.statusText);return e.json()}).then(e=>{const r=document.querySelector(".col-md-9 .row");r.innerHTML="",e.forEach(n=>{const s=document.createElement("div");s.classList.add("col-md-4","mb-4"),s.innerHTML=i(n),r.appendChild(s)})}).catch(e=>{console.error("\u041E\u0448\u0438\u0431\u043A\u0430:",e),alert("\u041F\u0440\u043E\u0438\u0437\u043E\u0448\u043B\u0430 \u043E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u043F\u043E\u0438\u0441\u043A\u0435 \u043A\u043D\u0438\u0433!")})}),document.getElementById("views-filter").addEventListener("click",function(){fetch("/postBooksByViews",{method:"POST",headers:{"Content-Type":"application/json"}}).then(t=>{if(!t.ok)throw new Error("\u041E\u0448\u0438\u0431\u043A\u0430 \u0441\u0435\u0442\u0438: "+t.statusText);return t.json()}).then(t=>{const e=document.querySelector(".col-md-9 .row");e.innerHTML="",t.forEach(r=>{const n=document.createElement("div");n.classList.add("col-md-4","mb-4"),n.innerHTML=i(r),e.appendChild(n)})}).catch(t=>{console.error("\u041E\u0448\u0438\u0431\u043A\u0430:",t),alert("\u041F\u0440\u043E\u0438\u0437\u043E\u0448\u043B\u0430 \u043E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0444\u0438\u043B\u044C\u0442\u0440\u0430\u0446\u0438\u0438 \u043A\u043D\u0438\u0433!")})}),document.getElementById("superprice-filter").addEventListener("click",function(){fetch("/postBooksBySuperprice",{method:"POST",headers:{"Content-Type":"application/json"}}).then(t=>{if(!t.ok)throw new Error("\u041E\u0448\u0438\u0431\u043A\u0430 \u0441\u0435\u0442\u0438: "+t.statusText);return t.json()}).then(t=>{const e=document.querySelector(".col-md-9 .row");e.innerHTML="",t.forEach(r=>{const n=document.createElement("div");n.classList.add("col-md-4","mb-4"),n.innerHTML=i(r),e.appendChild(n)})}).catch(t=>{console.error("\u041E\u0448\u0438\u0431\u043A\u0430:",t),alert("\u041F\u0440\u043E\u0438\u0437\u043E\u0448\u043B\u0430 \u043E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0444\u0438\u043B\u044C\u0442\u0440\u0430\u0446\u0438\u0438 \u043A\u043D\u0438\u0433!")})});
